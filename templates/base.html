<!doctype html>
<html lang="ja">
<head>
  <meta charset="utf-8">
  <title>{{ title or "Data Entry App" }}</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <style>
  :root{
    --bg:#ffffff; --fg:#111; --muted:#6b7280; --card:#fff;
    --border:#e5e7eb; --link:#1f6feb; --btn:#1f6feb; --btn-fg:#fff;
  }
  @media (prefers-color-scheme: dark){
    :root{
      --bg:#0b0f14; --fg:#e5e7eb; --muted:#9aa4b2; --card:#0f141a; --border:#1f2937;
      --link:#8ab4f8; --btn:#2563eb; --btn-fg:#fff;
    }
  }
  html{ -webkit-text-size-adjust:100%; }
  body{
    font-family: system-ui, Segoe UI, Helvetica, Arial, sans-serif;
    background: var(--bg); color: var(--fg);
    max-width: 920px; margin: 12px auto; padding: 0 12px; line-height: 1.6;
  }
  header{
    position: sticky; top: 0; z-index: 10;
    background: var(--bg); padding: 8px 0 10px; margin-bottom: 8px;
  }
  .bar{ display:flex; gap:8px; align-items:center; justify-content:space-between; }
  .title{ font-size: 22px; font-weight: 700; margin:0 }
  .actions{ display:flex; gap:8px; flex-wrap:wrap }
  a{ color: var(--link); text-decoration:none }
  .btn{ padding:10px 14px; border:1px solid var(--border); border-radius:12px; background:var(--card) }
  .btn.primary{ background: var(--btn); color: var(--btn-fg); border-color: var(--btn) }

  .row{ display:grid; grid-template-columns:1fr 2fr; gap:8px; align-items:center; margin-bottom:10px }
  input,select,textarea{
    padding:12px; font-size:18px; background:var(--card); color:var(--fg);
    border:1px solid var(--border); border-radius:10px
  }
  input[type=number]{ width: 100%; }
  table{ border-collapse:collapse; width:100%; background:var(--card); color:var(--fg); }
  th,td{ border:1px solid var(--border); padding:8px; text-align:left }
  th{ background: rgba(0,0,0,.03) }

  .flash{ padding:8px; border-radius:8px; margin:8px 0; }
  .flash.success{ background: #0d5e33; color:#fff; }
  .flash.error{ background: #5b1111; color:#fff; }

  @media (max-width:640px){
    body{ margin: 8px auto; padding: 0 8px }
    .row{ grid-template-columns:1fr; }
    label{ font-weight:600; }
    input,select,textarea{ font-size:20px; padding:14px }
    .title{ font-size: 20px; }
  }
  </style>
</head>
<body>
  <header>
    <div class="bar">
      <h1 class="title">生産ログ</h1>
      <nav class="actions">
        <a class="btn" href="{{ url_for('select_machine') }}">号機選択</a>
        <a class="btn" href="{{ url_for('index') }}">入力</a>
        <a class="btn" href="{{ url_for('records') }}">一覧</a>
        <a class="btn" href="{{ url_for('export') }}">CSV出力</a>
      </nav>
    </div>
  </header>

  {% with messages = get_flashed_messages(with_categories=true) %}
    {% if messages %}
      {% for category, message in messages %}
        <div class="flash {{ category }}">{{ message }}</div>
      {% endfor %}
    {% endif %}
  {% endwith %}

  {% block content %}{% endblock %}
</body>
</html>
